# KEM

訓練Word2Vec model參考文章：[以 gensim 訓練中文詞向量](http://zake7749.github.io/2016/08/28/word2vec-with-gensim/)

## Get Started

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes. See deployment for notes on how to deploy the project on a live system.

### Prerequisities

Ubuntu需要先安裝：

`sudo pip install virtualenv`

## Installing

1. `pip install kem`

## Run
#### Building the model  
使用api前必須先建立model  
停用詞以及結巴斷詞的字典在這邊  

> 1. 結巴字典：格式是txt, 在 [Open-Sentiment-Training-Data](https://github.com/UDICatNCHU/Open-Sentiment-Training-Data)當中，有數份字典
可以依需求將字典合併成一份後再去斷詞，效果會不同。  
> 2. 停用詞：有在停用詞裏面的單字會被當作冗詞贅字給濾掉，在此應用中只需要拿 [stopwrds](https://github.com/UDICatNCHU/Open-Sentiment-Training-Data/tree/master/stopwrds)裏面的stopwrds.json即可

1. command:
```
usage: manage.py buildkem  [--jiebaDict JIEBADICT] [--stopword STOPWORD] 
                           [--dimension DIMENSION] [--ontology ONTOLOGY]
```
* args:
  * jiebaDict:結巴自訂字典
  * stopword:停用詞(是否開啟ontology模式)
  * dimension:欲訓練model之維度(目前是400維，維度愈大檔案愈大)
  * ontology:是否開啟ontology模式

#### Usage of KEM class  
因為KEM是一個django的函式庫，所以需要設定urls.py以及vies.py  
並且在settings.py INSTALLED_APPS 新增kem喔

1. settings.py：
  ```
  INSTALLED_APPS = [
      'kem'
       ...
  ]
  ```
2. urls.py：  
在專案的urls.py引入函式庫的urls.py即可使用該api  
  ```
  import kem.urls
  urlpatterns += [
      url(r'^kem/', include(kem.urls))
  ]
  ```


## API
1. 取得字的向量：_`/kem`_
  - keyword
  - num
  - example：[http://140.120.13.244:10000/kem?keyword=草履蟲&num=100](http://140.120.13.244:10000/kem?keyword=草履蟲&num=100)

  ```
  ['原生動物', 0.7895185351371765]
  ['藍菌', 0.7865398526191711]
  ['甲藻', 0.7792112827301025]
  ['藍綠藻', 0.7636655569076538]
  ['芽孢', 0.7631546258926392]
  ['兼性', 0.7622398138046265]
  ['纖毛蟲', 0.7605307102203369]
  ['專性', 0.7589520215988159]
  ['莢膜', 0.7575902938842773]
  ['蟲類', 0.7529693841934204]
  ['菌門', 0.7505052089691162]
  ['厚壁', 0.75014328956604]
  ['厭氧菌', 0.7490075826644897]
  ['桿菌屬', 0.7489725947380066]
  ['變形蟲', 0.748399555683136]
  ['介殼', 0.7460906505584717]
  ['節肢動物', 0.7445138692855835]
  ['纖毛', 0.744355320930481]
  ['革蘭氏', 0.7432918548583984]
  ['黴菌', 0.7408658266067505]
  ...
  etc
  ```

2. 取得字的向量：_`/kem/vector`_

  - keyword
  - example： [http://140.120.13.244:10000/kem/vector?keyword=女生](http://140.120.13.244:10000/kem/vector?keyword=女生)

    ```
    [1.3885987997055054, 0.5394280552864075, -0.2656879723072052, 0.7741730809211731, 0.591987133026123, -0.8060644865036011, 0.8941763043403625, -0.2147711217403412, 0.09885716438293457, -1.1566911935806274, 0.47962328791618347, -0.6838283538818359, -1.9469645023345947, -1.4703015089035034, 0.3831453323364258, 0.423725962638855, -0.19282709062099457, 0.2891365885734558, 0.8897757530212402, -0.3628811836242676, 0.15466362237930298, -0.20357729494571686, -0.7629439234733582, -0.6112618446350098, 0.3141365051269531, -0.06861013174057007, -0.4942842125892639, -0.12428616732358932, -0.4748910069465637, 1.0161138772964478, -0.858925998210907, -1.4481232166290283, -0.9048944115638733, 0.37562525272369385, 0.43105870485305786, 1.889883279800415, -0.6101548075675964, -1.368857741355896, 0.06129308417439461, -0.19735464453697205, -0.7266778945922852, 0.6212248206138611, 0.45723870396614075, -0.9238318800926208, 1.0308277606964111, -0.37614884972572327, 0.10119640827178955, -0.3748443126678467, 0.5970380306243896, -2.0449912548065186, 0.3419393301010132, 0.47614049911499023, 1.5976694822311401, 0.430976539850235, 1.845346450805664, -1.0944284200668335, -0.5273614525794983, -0.6197008490562439, -0.793004035949707, -1.27271568775177, 0.4662802517414093, 1.0371707677841187, 0.7289270162582397, -1.0045949220657349, 2.6744565963745117, 0.221144437789917, -0.17832711338996887, 0.8432759046554565, -0.03301769867539406, -3.0322775840759277, 0.5439163446426392, -1.7049224376678467, 0.12641748785972595, -0.35788094997406006, -0.4882793426513672, 0.504503607749939, 0.24889039993286133, -1.206274390220642, 0.44076183438301086, 0.916208028793335, 0.1518188863992691, -1.1130417585372925, 1.2564713954925537, -0.5910258889198303, -0.541038990020752, 0.4158385396003723, 2.4430370330810547, 0.12342274934053421, 1.1787631511688232, -0.9939939379692078, -1.4820142984390259, -0.8522136211395264, 1.6127338409423828, 0.48360106348991394, -0.9248878955841064, 0.21030618250370026, -0.47894415259361267, -0.3141612112522125, -0.8137192130088806, -0.5026999115943909, -0.18053998053073883, -0.0852140486240387, -0.5436131954193115, 0.10602204501628876, 0.005784532520920038, -0.6672090291976929, 0.688372790813446, -0.46419885754585266, 0.16211429238319397, 1.0095720291137695, -1.179349422454834, 1.4306156635284424, -0.36824074387550354, -1.0650185346603394, -0.758241593837738, 1.5211613178253174, 1.1140220165252686, -1.185472846031189, -0.6573071479797363, 1.031684398651123, 3.0915324687957764, -1.45111083984375, -0.47273340821266174, 0.700181245803833, -0.21635043621063232, 1.265662670135498, -1.5711138248443604, -1.291365623474121, 0.001991210738196969, -0.5676051378250122, -1.330491304397583, -0.3744448125362396, -1.4566307067871094, 0.9308758974075317, 0.2777121067047119, -0.32257819175720215, -1.2171269655227661, -0.7519322633743286, -0.6488008499145508, -1.2093231678009033, -1.056404709815979, 1.973728060722351, 1.6260979175567627, 0.7547131180763245, -1.2167677879333496, -0.6436576247215271, -1.428409218788147, 1.09280264377594, -2.311659812927246, -0.49663716554641724, 0.40901920199394226, -0.8380560874938965, -0.5566163659095764, 0.377640962600708, 0.06672142446041107, 0.5759549736976624, -0.4244151711463928, 1.3984811305999756, 1.5153509378433228, -0.12266110628843307, 1.1727970838546753, 0.1904977709054947, 2.3597891330718994, 1.8514021635055542, -0.6848983764648438, -0.039131928235292435, 0.9139649868011475, 0.49714502692222595, 2.0060970783233643, -1.0477914810180664, 0.8807426691055298, -0.058037202805280685, 0.3133191168308258, 0.7794324159622192, -0.6158871650695801, 1.2436182498931885, -0.29478055238723755, 0.2803366482257843, -0.34860238432884216, -1.3613026142120361, 0.1778097152709961, -0.04248938336968422, 1.457297444343567, -0.20710931718349457, 0.8201696872711182, -0.11986465752124786, 1.80048668384552, 0.534973680973053, -0.6828964948654175, 1.255892276763916, 0.04353337362408638, -0.17578642070293427, -0.692023754119873, -1.9632424116134644, -0.7025596499443054, -0.07748740166425705, -0.41617903113365173, 2.468491315841675, -1.4059938192367554, 1.2255287170410156, -0.10617440938949585, -0.7885082364082336, 1.0445518493652344, -0.5705946683883667, 1.0448869466781616, -0.9119498133659363, 1.9512442350387573, 0.5106590986251831, -0.6974867582321167, -0.16547872126102448, -1.227501392364502, -1.728872299194336, -0.2557286322116852, 0.2627599835395813, 0.868306040763855, -0.7878159880638123, 0.5798788666725159, 0.23215314745903015, 1.7184027433395386, 0.6484318971633911, 0.2345714569091797, 0.2553189992904663, -0.09039454907178879, 1.383334755897522, -0.5275710821151733, -0.4835131764411926, -0.6057397127151489, -0.46091458201408386, 0.10890143364667892, 0.3101143538951874, 0.2941133379936218, 0.5573100447654724, -0.7283779382705688, -1.1656097173690796, -0.48061642050743103, 0.34820035099983215, -1.7155566215515137, -1.8655555248260498, 1.1624473333358765, -0.9496302008628845, -0.3452030122280121, -1.055639624595642, 0.5988535284996033, 0.6252339482307434, -0.35656067728996277, 0.9999897480010986, 1.314188838005066, 1.6677275896072388, 0.3751882016658783, -0.835597574710846, 0.5586521029472351, 1.356740951538086, 0.12343061715364456, -0.7169169783592224, 0.9523659348487854, -0.5676555633544922, -0.9040403366088867, 0.5736243724822998, -1.1315451860427856, -0.40287813544273376, -0.8204392194747925, -0.27872562408447266, -0.1604768931865692, 1.047098994255066, -1.2360279560089111, -0.09427472203969955, -1.7247995138168335, -0.2688775956630707, -0.8864540457725525, -0.01558578759431839, -1.1667518615722656, -0.20641650259494781, 1.670593500137329, 1.32122004032135, 0.14784090220928192, -0.9178369641304016, -1.4426170587539673, 0.00809957180172205, -0.8930400609970093, 0.9161952137947083, 0.47122642397880554, -1.1588109731674194, -0.20910429954528809, -0.7435729503631592, -1.2131273746490479, -0.4236935079097748, -0.3414211869239807, 0.21409252285957336, -0.8351388573646545, 0.7317389249801636, -0.12545616924762726, -0.4517243802547455, 0.08403515070676804, 0.2426622211933136, -0.11062338203191757, -0.03019757568836212, 0.042077042162418365, 0.1001887172460556, 0.1628139764070511, 0.042042944580316544, -0.8228719830513, 1.1480841636657715, -1.2363091707229614, -0.356084942817688, -1.7249430418014526, 1.18468177318573, 0.6765761375427246, 1.1766892671585083, 1.3978517055511475, -1.5437501668930054, -1.9360008239746094, 1.3995870351791382, -1.0395629405975342, 0.9706859588623047, 0.578218936920166, 1.3461475372314453, 0.041653383523225784, 1.1249580383300781, 0.77190101146698, -0.3643423318862915, -2.927720069885254, -1.0480924844741821, 0.8867835998535156, -1.471498727798462, -0.9196738600730896, 0.5863534212112427, 0.1913398802280426, 0.6462889909744263, 0.32118895649909973, -0.4045909643173218, -0.5049349069595337, -1.0990396738052368, -2.3521432876586914, 0.27230727672576904, -0.7003844976425171, 1.451322317123413, 1.6023774147033691, 0.9106742739677429, 1.335477352142334, -0.7159866094589233, 0.4709687829017639, 0.24767598509788513, -0.6346383094787598, -0.952205240726471, 0.20107325911521912, 0.36678072810173035, -0.41437655687332153, 1.1334409713745117, 2.0474936962127686, 0.5028844475746155, 0.1700645387172699, 0.13113214075565338, 0.5384957194328308, 1.169667363166809, 0.42143747210502625, -1.7508223056793213, -0.1364986002445221, -0.7525117993354797, 0.7681407332420349, 0.8801819682121277, 0.05473385378718376, -0.4234473705291748, -1.0244027376174927, 1.1377352476119995, -1.185506820678711, -0.2756787836551666, -2.935666799545288, -0.10303958505392075, -0.9064025282859802, 1.705653190612793, -0.1870555877685547, 1.9318243265151978, 0.4905117452144623, -0.11194915324449539, 0.501758337020874, -0.7804413437843323, 0.4074612259864807, -0.29962819814682007, 1.0185331106185913, 0.21081168949604034, -0.5383347868919373, 0.16170723736286163, -1.566067099571228, -1.423357605934143, -1.6484507322311401, 0.5515144467353821, -0.5443017482757568, 0.4345690906047821, -0.9011677503585815, 1.2064834833145142, 0.8084508180618286, 0.5711621046066284, -0.867776095867157, 0.5413046479225159, -1.643418312072754, 1.0379395484924316, -1.1961075067520142, -0.19939012825489044, 1.6534199714660645, 0.08038878440856934]
    ```

## Built With

python3.4

## Contributors
* __張泰瑋__ [david](https://github.com/david30907d)
* __游哲軒__ [Shane Yu](https://github.com/theshaneyu)

## License

This package use `GPL3.0` License.